(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2752:(e,t,r)=>{Promise.resolve().then(r.bind(r,8622))},8622:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(5155),l=r(2115),d=r(5317),i=r(3915);let s=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyDNZqjvC_nODBW6pgvCFk6agICcNTlDksk",authDomain:"zaza-leadfinder.firebaseapp.com",projectId:"zaza-leadfinder",storageBucket:"zaza-leadfinder.appspot.com",messagingSenderId:"765432613138",appId:"1:765432613138:web:3f45efa672e3eb5c6d4bcb"}),o=(0,d.aU)(s);function n(){let[e,t]=(0,l.useState)([]),[r,i]=(0,l.useState)(!0),[s,n]=(0,l.useState)(""),[m,c]=(0,l.useState)(""),[u,g]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[f,b]=(0,l.useState)(""),[x,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(h||f){let e=setTimeout(()=>{p(""),b("")},5e3);return()=>clearTimeout(e)}},[h,f]);let j=async()=>{try{let e=(0,d.P)((0,d.rJ)(o,"leads"),(0,d.My)("createdAt","desc")),r=(await (0,d.GG)(e)).docs.map(e=>{var t,r;return{...e.data(),createdAt:(null==(r=e.data().createdAt)||null==(t=r.toDate)?void 0:t.call(r))||null}});t(r)}catch(e){console.error("Error fetching leads:",e)}finally{i(!1)}};(0,l.useEffect)(()=>{j()},[]);let S=async e=>{e.preventDefault(),y(!0),p(""),b("");let t=s.trim(),r=m.trim(),a=u.trim().toLowerCase();if(!t||!r||!a){b("All fields are required."),y(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){b("Please enter a valid email address."),y(!1);return}try{let e=(0,d.P)((0,d.rJ)(o,"leads"),(0,d.My)("email"));if((await (0,d.GG)(e)).docs.some(e=>e.data().email===a)){b("This email has already been submitted."),y(!1);return}await (0,d.gS)((0,d.rJ)(o,"leads"),{firstName:t,lastName:r,email:a,createdAt:(0,d.O5)()}),n(""),c(""),g(""),p("✅ Lead added successfully!"),j()}catch(e){console.error("Error adding lead:",e),b("Something went wrong. Please try again.")}finally{y(!1)}};return(0,a.jsxs)("main",{style:{padding:"2rem",backgroundColor:"#111",color:"#fff",minHeight:"100vh"},children:[(0,a.jsx)("h2",{children:"Leads"}),(0,a.jsx)("h3",{children:"Submit"}),(0,a.jsxs)("form",{onSubmit:S,style:{marginBottom:"1rem"},children:[(0,a.jsx)("input",{type:"text",placeholder:"First Name",value:s,onChange:e=>n(e.target.value),required:!0,style:{marginRight:"0.5rem"}}),(0,a.jsx)("input",{type:"text",placeholder:"Last Name",value:m,onChange:e=>c(e.target.value),required:!0,style:{marginRight:"0.5rem"}}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:u,onChange:e=>g(e.target.value),required:!0,style:{marginRight:"0.5rem"}}),(0,a.jsx)("button",{type:"submit",disabled:x,children:x?"Submitting...":"Submit"})]}),(h||f)&&(0,a.jsx)("div",{style:{marginBottom:"1rem",padding:"0.75rem 1rem",borderRadius:"6px",backgroundColor:h?"#163c2f":"#3c1b1b",color:h?"#b7ffe0":"#ffc4c4",border:"1px solid ".concat(h?"#2bd396":"#ff6b6b")},children:h||f}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"2rem"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{backgroundColor:"#222",color:"#fff"},children:[(0,a.jsx)("th",{style:{textAlign:"left",padding:"0.75rem 1rem",borderBottom:"1px solid #444"},children:"First Name"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"0.75rem 1rem",borderBottom:"1px solid #444"},children:"Last Name"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"0.75rem 1rem",borderBottom:"1px solid #444"},children:"Email"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"0.75rem 1rem",borderBottom:"1px solid #444"},children:"Submitted"})]})}),(0,a.jsx)("tbody",{children:r?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,style:{padding:"1rem",color:"#999"},children:"Loading leads..."})}):e.map((e,t)=>(0,a.jsxs)("tr",{style:{backgroundColor:t%2==0?"#1a1a1a":"#121212"},children:[(0,a.jsx)("td",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #333"},children:e.firstName}),(0,a.jsx)("td",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #333"},children:e.lastName}),(0,a.jsx)("td",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #333"},children:e.email}),(0,a.jsx)("td",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid #333"},children:e.createdAt?e.createdAt.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—"})]},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,399,441,684,358],()=>t(2752)),_N_E=e.O()}]);